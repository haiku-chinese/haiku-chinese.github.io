<!doctype html><html lang=en>
<!-- Mirrored from www.haiku-os.org/legacy-docs/writing-video-card-drivers by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 05 Aug 2021 01:12:15 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=keywords content><meta name=copyright content="2001-2021 Haiku Inc."><meta property="og:site_name" content="Haiku Project"><meta property="og:title" content="Writing Video Card Drivers In BeOS"><meta property="og:url" content="writing-video-card-drivers/index.html"><meta property="og:type" content="website"><meta property="og:image" content="../images/haiku_600x315.png"><title>Writing Video Card Drivers In BeOS | Haiku Project</title><link rel=canonical href=writing-video-card-drivers/index.html><link rel="shortcut icon" href=../favicon.ico><link href=../css/bootstrap.min.css rel=stylesheet><link href=../css/bootstrap4_fixes.css rel=stylesheet><link href=../css/shijin4.css rel=stylesheet><link href=writing-video-card-drivers/index.xml rel=alternate type=application/rss+xml title="Haiku Project"></head><body><div id=page><a href=../index.html><img src=../images/haiku_logo_white.svg alt=Home id=logo height=100 style=padding-left:3px></a><div id=top-links><a href=../get-haiku/r1beta3/index.html title="Get Haiku!" class=toggleopacity><img src=../images/download_32.png text="get haiku!" alt=Download></a>
<a href=../contact.html title="Contact the Haiku Project" class=toggleopacity><img src=../images/App_Mail_32.png text="contact the haiku project" alt=Contact></a>
<a href=https://www.haiku-inc.org/donate/ title="Make a donation to the Haiku Project" class=toggleopacity><img src=../images/App_Finance_32.png alt=Donate text="make a donation to the haiku project"></a>
<a href=https://dev.haiku-os.org/ title="Report bugs" class=toggleopacity><img src=../images/bug_tracker_32.png alt="Report Bugs" text="report bugs related to haiku"></a>
<a href=https://depot.haiku-os.org/ title="Download apps for Haiku from HaikuDepot" class=toggleopacity><img src=../images/installer_32.png alt=HaikuDepot text="download apps for haiku from haikudepot"></a></div><nav class="navbar navbar-expand-sm navbar-light bg-light"><button class="navbar-toggler collapsed" id=navbar-toggler type=button data-toggle=collapse data-target=#navbar-collapseme aria-controls=navbar-collapseme aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbar-collapseme><ul class="navbar-nav mr-auto"><li class=nav-item><a class=nav-link href=../about/index.html>About</a></li><li class=nav-item><a class=nav-link href=../community/index.html>Community</a></li><li class=nav-item><a class=nav-link href=../development/index.html>Development</a></li><li class=nav-item><a class=nav-link href=../documents/index.html>Documents</a></li></ul><form class=form-inline role=search action=https://duckduckgo.com/><input type=hidden name=sites value=https://www.haiku-os.org><div class=input-group><input type=text class=form-control placeholder=Search name=q>
<span class=input-group-append><button type=submit class="btn btn-outline-secondary">&#x1f50d;</button></span></div></form></div></nav><div class=row id=main-front><div class=col-sm-12><ol class=breadcrumb><li class=breadcrumb-item><a href=../index.html>Home</a></li><li class=breadcrumb-item><a href=index.html>Legacy-docs</a></li><li class=breadcrumb-item><a href=writing-video-card-drivers/index.html>Writing Video Card Drivers In BeOS</a></li></ol></div><div class=col-md-12><div class=node><h1 class=title>Writing Video Card Drivers In BeOS</h1><p><h2>A Thesis By:</h2><p><strong>Rudolf Cornelissen</strong><br>part-time student<br>06 June 2003<br></p><h2>Table Of Contents</h2><p><ol type=1><li><font size=+1><a href=writing-video-card-drivers/01-introduction.html>Introduction</a></font><ol type=1.0 start=1><li><a href=writing-video-card-drivers/01-introduction.html#1.1>Problem Description</a></li><li><a href=writing-video-card-drivers/01-introduction.html#1.2>Thesis</a></li><li><a href=writing-video-card-drivers/01-introduction.html#1.3>About The Author</a></li><li><a href=writing-video-card-drivers/01-introduction.html#1.4>About BeOS</a></li><li><a href=writing-video-card-drivers/01-introduction.html#1.5>About Video Card Drivers</a></li></ol></li><li><font size=+1><a href=writing-video-card-drivers/02-beos-api.html>BeOS API Classes For Video Card Drivers</a></font><ol><li><a href=writing-video-card-drivers/02-beos-api.html#2.1>BScreen (Interface Kit)</a></li><li><a href=writing-video-card-drivers/02-beos-api.html#2.2>BWindowsScreen (Game Kit)</a></li><li><a href=writing-video-card-drivers/02-beos-api.html#2.3>BDirectWindows (Game Kit)</a></li><li><a href=writing-video-card-drivers/02-beos-api.html#2.4>Classes For Hardware Overlay: BBitmap (Interface Kit)</a></li><li><a href=writing-video-card-drivers/02-beos-api.html#2.5>Classes For Hardware Overlay: BView (Interface Kit)</a></li><li><a href=writing-video-card-drivers/02-beos-api.html#2.6>Conclusion</a></li></ol></li><li><font size=+1><a href=writing-video-card-drivers/03-kernel-driver.html>Kernel Driver</a></font><ol><li><a href=writing-video-card-drivers/03-kernel-driver.html#3.1>Interface To The OS</a><ol><li><font size=-1><a href=writing-video-card-drivers/03-kernel-driver.html#3.1.1>init_hardware()</a></font></li><li><font size=-1><a href=writing-video-card-drivers/03-kernel-driver.html#3.1.2>init_driver()</a></font></li><li><font size=-1><a href=writing-video-card-drivers/03-kernel-driver.html#3.1.3>publish_devices()</a></font></li><li><font size=-1><a href=writing-video-card-drivers/03-kernel-driver.html#3.1.4>uninit_driver()</a></font></li><li><font size=-1><a href=writing-video-card-drivers/03-kernel-driver.html#3.1.5>find_device()</a></font></li></ol></li><li><a href=writing-video-card-drivers/03-kernel-driver.html#3.2>Interface To The User</a><ol><li><font size=-1><a href=writing-video-card-drivers/03-kernel-driver.html#3.2.1>open_hook()</a></font></li><li><font size=-1><a href=writing-video-card-drivers/03-kernel-driver.html#3.2.2>close_hook()</a></font></li><li><font size=-1><a href=writing-video-card-drivers/03-kernel-driver.html#3.2.3>free_hook()</a></font></li><li><font size=-1><a href=writing-video-card-drivers/03-kernel-driver.html#3.2.4>control_hook()</a></font></li><li><font size=-1><a href=writing-video-card-drivers/03-kernel-driver.html#3.2.5>read_hook()</a></font></li><li><font size=-1><a href=writing-video-card-drivers/03-kernel-driver.html#3.2.6>write_hook()</a></font></li></ol></li><li><a href=writing-video-card-drivers/03-kernel-driver.html#3.3>Conclusion</a></li></ol></li><li><font size=+1><a href=writing-video-card-drivers/04-accelerant.html>Accelerant</a></font><ol><li><a href=writing-video-card-drivers/04-accelerant.html#4.1>The Hooks Of The Accelerant</a><ol><li><font size=-1><a href=writing-video-card-drivers/04-accelerant.html#4.1.1>INIT_ACCELERANT</a></font></li><li><font size=-1><a href=writing-video-card-drivers/04-accelerant.html#4.1.2>CLONE_ACCELERANT</a></font></li><li><font size=-1><a href=writing-video-card-drivers/04-accelerant.html#4.1.3>UNINIT_ACCELERANT</a></font></li><li><font size=-1><a href=writing-video-card-drivers/04-accelerant.html#4.1.4>ACCELERANT_RETRACE_SEMAPHORE</a></font></li><li><font size=-1><a href=writing-video-card-drivers/04-accelerant.html#4.1.5>ACCELERANT_MODE_COUNT &
GET_MODE_LIST</a></font></li><li><font size=-1><a href=writing-video-card-drivers/04-accelerant.html#4.1.6>PROPOSE_DISPLAY_MODE</a></font></li><li><font size=-1><a href=writing-video-card-drivers/04-accelerant.html#4.1.7>SET_DISPLAY_MODE</a></font></li><li><font size=-1><a href=writing-video-card-drivers/04-accelerant.html#4.1.8>GET_FRAME_BUFFER_CONFIG</a></font></li><li><font size=-1><a href=writing-video-card-drivers/04-accelerant.html#4.1.9>GET_PIXEL_CLOCK_LIMITS</a></font></li><li><font size=-1><a href=writing-video-card-drivers/04-accelerant.html#4.1.10>MOVE_DISPLAY</a></font></li><li><font size=-1><a href=writing-video-card-drivers/04-accelerant.html#4.1.11>SET_INDEXED_COLOR</a></font></li><li><font size=-1><a href=writing-video-card-drivers/04-accelerant.html#4.1.12>GET_TIMING_CONSTRAINTS</a></font></li><li><font size=-1><a href=writing-video-card-drivers/04-accelerant.html#4.1.13>SET_CURSOR_SHAPE</a></font></li><li><font size=-1><a href=writing-video-card-drivers/04-accelerant.html#4.1.14>MOVE_CURSOR</a></font></li><li><font size=-1><a href=writing-video-card-drivers/04-accelerant.html#4.1.15>2D Accelerant Functions</a></font></li><li><font size=-1><a href=writing-video-card-drivers/04-accelerant.html#4.1.16>Hardware Overlay Functions</a></font></li></ol></li><li><a href=writing-video-card-drivers/04-accelerant.html#4.2>Conclusion</a></li></ol></li><li><font size=+1><a href=writing-video-card-drivers/05-flags.html>Flags</a></font><ol><li><a href=writing-video-card-drivers/05-flags.html#5.1>Flags For User Overlay</a><ol><li><font size=-1><a href=writing-video-card-drivers/05-flags.html#5.1.1>B_BITMAP_WILL_OVERLAY</a></font></li><li><font size=-1><a href=writing-video-card-drivers/05-flags.html#5.1.2>B_BITMAP_RESERVE_OVERLAY_CHANNEL</a></font></li><li><font size=-1><a href=writing-video-card-drivers/05-flags.html#5.1.3>B_OVERLAY_TRANSFER_CHANNEL</a></font></li><li><font size=-1><a href=writing-video-card-drivers/05-flags.html#5.1.4>B_OVERLAY_MIRROR</a></font></li><li><font size=-1><a href=writing-video-card-drivers/05-flags.html#5.1.5>B_OVERLAY_FILTER_HORIZONTAL</a></font></li><li><font size=-1><a href=writing-video-card-drivers/05-flags.html#5.1.6>B_OVERLAY_FILTER_VERTICAL</a></font></li></ol></li><li><a href=writing-video-card-drivers/05-flags.html#5.2>Flags For Mode Setup: Mode Flags</a><ol><li><font size=-1><a href=writing-video-card-drivers/05-flags.html#5.2.1>B_SUPPORTS_OVERLAYS</a></font></li><li><font size=-1><a href=writing-video-card-drivers/05-flags.html#5.2.2>B_HARDWARE_CURSOR</a></font></li><li><font size=-1><a href=writing-video-card-drivers/05-flags.html#5.2.3>B_IO_FB_NA</a></font></li><li><font size=-1><a href=writing-video-card-drivers/05-flags.html#5.2.4>B_PARALLEL_ACCESS</a></font></li><li><font size=-1><a href=writing-video-card-drivers/05-flags.html#5.2.5>B_8_BIT_DAC</a></font></li><li><font size=-1><a href=writing-video-card-drivers/05-flags.html#5.2.6>B_DPMS</a></font></li><li><font size=-1><a href=writing-video-card-drivers/05-flags.html#5.2.7>B_SCROLL</a></font></li></ol></li><li><a href=writing-video-card-drivers/05-flags.html#5.3>Flags For Mode Setup: Mode Timing Flags</a><ol><li><font size=-1><a href=writing-video-card-drivers/05-flags.html#5.3.1>B_BLANK_PEDESTAL</a></font></li><li><font size=-1><a href=writing-video-card-drivers/05-flags.html#5.3.2>B_TIMING_INTERLACED</a></font></li><li><font size=-1><a href=writing-video-card-drivers/05-flags.html#5.3.3>B_SYNC_ON_GREEN</a></font></li><li><font size=-1><a href=writing-video-card-drivers/05-flags.html#5.3.4>B_POSITIVE_HSYNC &
B_POSITIVE_VSYNC</a></font></li></ol></li><li><a href=writing-video-card-drivers/05-flags.html#5.4>Conclusion</a></li></ol></li><li><font size=+1><a href=writing-video-card-drivers/06-writing-the-driver.html>Writing The Driver</a></font><ol><li><a href=writing-video-card-drivers/06-writing-the-driver.html#6.1>Action Plan</a><ol><li><font size=-1><a href=writing-video-card-drivers/06-writing-the-driver.html#6.1.1>Preparations</a></font></li><li><font size=-1><a href=writing-video-card-drivers/06-writing-the-driver.html#6.1.2>Step 1: VBE2 (Vesa Mode)
Activation</a></font></li><li><font size=-1><a href=writing-video-card-drivers/06-writing-the-driver.html#6.1.3>Step 2: Non-Active Driver
Installation</a></font></li><li><font size=-1><a href=writing-video-card-drivers/06-writing-the-driver.html#6.1.4>Step 3: Hardware Cursor
Building</a></font></li><li><font size=-1><a href=writing-video-card-drivers/06-writing-the-driver.html#6.1.5>Step 4: Setting The Frame Buffer
Start Address</a></font></li><li><font size=-1><a href=writing-video-card-drivers/06-writing-the-driver.html#6.1.6>Step 5: Setting The Frame Buffer
Pitch</a></font></li><li><font size=-1><a href=writing-video-card-drivers/06-writing-the-driver.html#6.1.7>Step 6: Setting The Color
Depth</a></font></li><li><font size=-1><a href=writing-video-card-drivers/06-writing-the-driver.html#6.1.8>Step 7: Setting The Color
Pallete</a></font></li><li><font size=-1><a href=writing-video-card-drivers/06-writing-the-driver.html#6.1.9>Step 8: DPMS
Building</a></font></li><li><font size=-1><a href=writing-video-card-drivers/06-writing-the-driver.html#6.1.10>Step 9: Setting The Refresh
Rate</a></font></li><li><font size=-1><a href=writing-video-card-drivers/06-writing-the-driver.html#6.1.11>Step 10: Setting The Monitor
Timing</a></font></li><li><font size=-1><a href=writing-video-card-drivers/06-writing-the-driver.html#6.1.12>Step 11: Switching On
'Enhanced Mode'</a></font></li><li><font size=-1><a href=writing-video-card-drivers/06-writing-the-driver.html#6.1.13>Step 12: Setting The
Acceleration</a></font></li><li><font size=-1><a href=writing-video-card-drivers/06-writing-the-driver.html#6.1.14>Step 13: Building Hardware
Overlay</a></font></li><li><font size=-1><a href=writing-video-card-drivers/06-writing-the-driver.html#6.1.15>Step 14: Cold Start Of The
Video Card</a></font></li></ol></li><li><a href=writing-video-card-drivers/06-writing-the-driver.html#6.2>Testing The Driver</a><ol><li><font size=-1><a href=writing-video-card-drivers/06-writing-the-driver.html#6.2.1>Kernel Driver</a></font></li><li><font size=-1><a href=writing-video-card-drivers/06-writing-the-driver.html#6.2.2>Accelerant</a></font></li></ol></li><li><a href=writing-video-card-drivers/06-writing-the-driver.html#6.3>Stability</a></li><li><a href=writing-video-card-drivers/06-writing-the-driver.html#6.4>Conclusion</a></li></ol></li><li><font size=+1><a href=writing-video-card-drivers/07-conclusion.html>Conclusion</a></font></li></ol></p><h2>Appendix</h2><p><ol type=a><li><font size=+1><a href=writing-video-card-drivers/appendix-a-sources-of-information.html>Sources Of Information</a></font><ol><li><a href=writing-video-card-drivers/appendix-a-sources-of-information.html#a.1>The Manufacturer</a></li><li><a href=writing-video-card-drivers/appendix-a-sources-of-information.html#a.2>Linux</a></li><li><a href=writing-video-card-drivers/appendix-a-sources-of-information.html#a.3>The Internet</a></li><li><a href=writing-video-card-drivers/appendix-a-sources-of-information.html#a.4>Testing For Specifications</a></li><li><a href=writing-video-card-drivers/appendix-a-sources-of-information.html#a.5>Reverse Engineering</a></li></ol></li><li><font size=+1><a href=writing-video-card-drivers/appendix-b-glossary.html>Glossary</a></font></li><li><font size=+1><a href=writing-video-card-drivers/appendix-c-references.html>References</a></font></li></ol></p></p></div></div></div><footer><div style=float:right><a href=https://www.netlify.com/><img src=https://www.netlify.com/img/global/badges/netlify-dark.svg alt="Deploys by Netlify"></a></div><p>&copy; 2001-2021 Haiku, Inc. &mdash; Haiku&reg; and the HAIKU logo&reg; are registered trademarks of <a href=https://www.haiku-inc.org/ target=_blank>Haiku, Inc.</a></p><p class=last><a href=../index.xml>Main feed</a> |
<a href=../blog/index.xml>Blog-O-Sphere feed</a> |
<a href=../community/organization/policies/index.html>Community policies</a> |
<a href=https://twitter.com/haikuOS>Twitter</a> |
<a href=https://mastodon.xyz/@haiku>Mastodon</a> |
<a href=https://www.linkedin.com/company/haiku-inc->LinkedIn</a></p></footer></div><link href="https://fonts.googleapis.com/css?family=Noto+Sans:400,400i,700,700i" rel=stylesheet><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel=stylesheet><script src=../js/navbar.js></script><!-- Fathom -->
<script>
(function(f, a, t, h, o, m){
	a[h]=a[h]||function(){
		(a[h].q=a[h].q||[]).push(arguments)
	};
	o=f.createElement('script'),
	m=f.getElementsByTagName('script')[0];
	o.async=1; o.src=t; o.id='fathom-script';
	m.parentNode.insertBefore(o,m)
})(document, window, '../../metrics.haiku-os.org/tracker.js', 'fathom');
fathom('trackPageview');
</script>
<!-- / Fathom --></body>
<!-- Mirrored from www.haiku-os.org/legacy-docs/writing-video-card-drivers by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 05 Aug 2021 01:12:27 GMT -->
</html>