<!doctype html><html lang=en>
<!-- Mirrored from www.haiku-os.org/guides/virtualizing/aws by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 05 Aug 2021 01:37:57 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=keywords content><meta name=copyright content="2001-2021 Haiku Inc."><meta property="og:site_name" content="Haiku Project"><meta property="og:title" content="Emulating Haiku on Amazon Web Services"><meta property="og:url" content="aws/index.html"><meta property="og:type" content="website"><meta property="og:image" content="../../images/haiku_600x315.png"><title>Emulating Haiku on Amazon Web Services | Haiku Project</title><link rel=canonical href=aws/index.html><link rel="shortcut icon" href=../../favicon.ico><link href=../../css/bootstrap.min.css rel=stylesheet><link href=../../css/bootstrap4_fixes.css rel=stylesheet><link href=../../css/shijin4.css rel=stylesheet></head><body><div id=page><a href=../../index.html><img src=../../images/haiku_logo_white.svg alt=Home id=logo height=100 style=padding-left:3px></a><div id=top-links><a href=../../get-haiku/r1beta3/index.html title="Get Haiku!" class=toggleopacity><img src=../../images/download_32.png text="get haiku!" alt=Download></a>
<a href=../../contact.html title="Contact the Haiku Project" class=toggleopacity><img src=../../images/App_Mail_32.png text="contact the haiku project" alt=Contact></a>
<a href=../../community/donating_to_haiku title="Make a donation to the Haiku Project" class=toggleopacity><img src=../../images/App_Finance_32.png alt=Donate text="make a donation to the haiku project"></a>
<a href=https://dev.haiku-os.org/ title="Report bugs" class=toggleopacity><img src=../../images/bug_tracker_32.png alt="Report Bugs" text="report bugs related to haiku"></a>
<a href=https://depot.haiku-os.org/ title="Download apps for Haiku from HaikuDepot" class=toggleopacity><img src=../../images/installer_32.png alt=HaikuDepot text="download apps for haiku from haikudepot"></a></div><nav class="navbar navbar-expand-sm navbar-light bg-light"><button class="navbar-toggler collapsed" id=navbar-toggler type=button data-toggle=collapse data-target=#navbar-collapseme aria-controls=navbar-collapseme aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbar-collapseme><ul class="navbar-nav mr-auto"><li class=nav-item><a class=nav-link href=../../about/index.html>About</a></li><li class=nav-item><a class=nav-link href=../../community/index.html>Community</a></li><li class=nav-item><a class=nav-link href=../../development/index.html>Development</a></li><li class=nav-item><a class=nav-link href=../../documents/index.html>Documents</a></li></ul><form class=form-inline role=search action=https://duckduckgo.com/><input type=hidden name=sites value=https://www.haiku-os.org><div class=input-group><input type=text class=form-control placeholder=Search name=q>
<span class=input-group-append><button type=submit class="btn btn-outline-secondary">&#x1f50d;</button></span></div></form></div></nav><div class=row id=main-front><div class=col-sm-12><ol class=breadcrumb><li class=breadcrumb-item><a href=../../index.html>Home</a></li><li class=breadcrumb-item><a href=../index.html>Haiku Guides</a></li><li class=breadcrumb-item><a href=index.html>Virtualizing Haiku</a></li><li class=breadcrumb-item><a href=aws/index.html>Emulating Haiku on Amazon Web Services</a></li></ol></div><div class=col-md-12><div class=node><h1 class=title>Emulating Haiku on Amazon Web Services</h1><p><p>Amazon Web Services (or, in short, AWS) is one of the most prominent cloud computing platforms that&rsquo;s widely used both by private individuals and businesses alike. Since booting directly from an ISO file is not possible, we will have to create an <a href=https://en.wikipedia.org/wiki/Amazon_Machine_Image>Amazon Machine Image (AMI)</a> based on a virtual appliance.</p><h5 id=go-to-section>Go to section</h5><ul><li><a href=#part_prepare>Preparing for this tutorial</a></li><li><a href=#part_disk>Preparing the virtual disk image</a></li><li><a href=#part_environment>Preparing the environment</a></li><li><a href=#part_ami>Preparing the AMI</a></li><li><a href=#part_deployment>Deploying the AMI on the AWS platform</a></li></ul><h3 id=preparing-for-this-tutorial-a-namepart_preparea>Preparing for this tutorial <a name=part_prepare></a></h3><p>Disk files represent physical devices but in the form of a file. During the preparation phase, we will need to download a Haiku image file from <a href=../../get-haiku/r1beta3/index.html>here</a>. Then, we will have to use <a href=https://www.virtualbox.org/>VirtualBox</a> to create a disk image that can be later converted into an AMI image file.</p><p>If you&rsquo;re not familiar with this process, use the <strong><a href=virtualbox/index.html>Virtualizing Haiku in VirtualBox</a></strong> tutorial as a reference.</p><p>From the perspective of the operating system, disk images can be compared to physical hard drives and other forms of storage. Therefore, it should be noted that while creating your virtual machine in VirtualBox, you should ensure that the disk space that was allocated to the drive does not cross your quota on the AWS platform to avoid any unnecessary charges.</p><h3 id=preparing-the-virtual-disk-image-a-namepart_preparea>Preparing the virtual disk image <a name=part_prepare></a></h3><h5 id=spotting-the-virtual-disk-image>Spotting the virtual disk image</h5><p>After following through the process, you should now have a <code>.vdi</code> file alongside other relevant files. Its precise location can vary according to your operating system, but generally speaking;</p><ul><li>If you&rsquo;re using Windows, you can find the files of Haiku&rsquo;s virtual machine in the following directory:</li></ul><pre><code>C:\Users\&lt;YOUR USERNAME&gt;\.VirtualBox
</code></pre><p>Replace <code>&lt;YOUR USERNAME></code> with your username.</p><ul><li>In Linux and Solaris operating systems, you can find them in your home directory:</li></ul><pre><code>~/VirtualBox VMs
</code></pre><ul><li>In macOS environments, the files can be found here instead:</li></ul><pre><code>~/Library/VirtualBox
</code></pre><p><code>.vdi</code> files are not supported by one of the tools that we will use later, we will have to convert our <code>.vdi</code> file to a <code>.vhd</code> file, which shares a lot of similarities and is also properly supported. In order to do that, we will quickly use a shell command that VirtualBox provides us with and wait for the process to finish:</p><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>vboxmanage clonehd &lt;<span style=color:#24909d>source</span> path of the .vdh file&gt; &lt;destination path of the .vhd file&gt; --format VHD
</code></pre></div><h3 id=preparing-the-environment-a-namepart_environmenta>Preparing the environment <a name=part_environment></a></h3><p>Now that we have successfully extracted the <code>.vdi</code> file, we will need to convert it into an AMI image. Fortunately for us, Amazon provides tools that are designed for this operation.</p><ul><li>In Debian/Ubuntu machines, you can obtain them by running the following command inside of a Terminal:</li></ul><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>sudo apt install ec2-api-tools ec2-ami-tools
</code></pre></div><ul><li>In Linux-based operating systems that use the <a href=https://rpm.org/>Red Hat Package Manager</a> (RPM), such as CentOS, Fedora, Red Hat Linux, you can obtain the tools by running these commands instead:</li></ul><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>sudo yum install ruby

<span style=color:#999;font-style:italic># Install ec2-api tools</span>
wget http://s3.amazonaws.com/ec2-downloads/ec2-api-tools.zip
unzip ec2-api-tools.zip
<span style=color:#24909d>cd</span> ./ec2-api-tools-*
mkdir /opt/ec2 <span style=color:#999;font-style:italic># feel free to use other directories</span>
mv ./* /opt/ec2/tools


<span style=color:#999;font-style:italic># Install ec2-ami-tools</span>
wget https://s3.amazonaws.com/ec2-downloads/ec2-ami-tools.noarch.rpm
sudo yum install ec2-ami-tools.noarch.rpm
</code></pre></div><p>We&rsquo;re nearly done! All we need is to store our credentials in variables, since we will use them multiple times across the rest of the tutorial.</p><p>For convenience, we will set our <a href=https://docs.aws.amazon.com/general/latest/gr/aws-security-credentials.html>AWS Security Credentials</a> as two variables; <code>AWS_KEY</code></p><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=color:#24909d>export</span> <span style=color:#40ffff>AWS_KEY</span>=<span style=color:#ed9d13>&#34;&lt;YOUR AWS KEY&gt;&#34;</span>
<span style=color:#24909d>export</span> <span style=color:#40ffff>AWS_SEC</span>=<span style=color:#ed9d13>&#34;&lt;YOUR AWS SECRET&gt;&#34;</span>
</code></pre></div><p>Make sure to replace <code>&lt;YOUR AWS KEY></code> and <code>&lt;YOUR AWS SECRET></code> with your actual AWS key and secret.</p><h3 id=preparing-the-ami-a-namepart_amia>Preparing the AMI <a name=part_ami></a></h3><h5 id=uploading-the-disk-image>Uploading the disk image</h5><p>Now that everything is set and in order, we can finally upload the image to Amazon!</p><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>ec2-import-volume <span style=color:#ed9d13>\
</span><span style=color:#ed9d13></span>    --format vhd <span style=color:#ed9d13>\
</span><span style=color:#ed9d13></span>    --volume-size <span style=color:#3677a9>4</span> <span style=color:#ed9d13>\
</span><span style=color:#ed9d13></span>    --region us-east-1 <span style=color:#ed9d13>\
</span><span style=color:#ed9d13></span>    --availability-zone us-east-1a <span style=color:#ed9d13>\
</span><span style=color:#ed9d13></span>    --bucket haiku-folder <span style=color:#ed9d13>\
</span><span style=color:#ed9d13></span>    --owner-akid <span style=color:#40ffff>$AWS_KEY</span> --owner-sak <span style=color:#40ffff>$AWS_SEC</span> <span style=color:#ed9d13>\
</span><span style=color:#ed9d13></span>    --aws-access-key <span style=color:#40ffff>$AWS_KEY</span> --aws-secret-key <span style=color:#40ffff>$AWS_SEC</span> <span style=color:#ed9d13>\
</span><span style=color:#ed9d13></span>    Haiku.vhd
</code></pre></div><p>Before proceeding any further, we will go over some of the parameters which you may find necessary to change.</p><ul><li><p><code>--volume-size</code> is the parameter that defines the amount of space that will be allocated for the virtualized environment. In this case, we chose the number <code>4</code> because it is the same one as the one we picked during the installation process in the <a href=virtualbox/index.html>VirtualBox tutorial</a>.</p></li><li><p><code>--region</code> is the parameter that sets the server&rsquo;s region, which is independent from other regions. The <code>--availability-zone</code> parameter sets the availability zone &ndash; those also hold a degree of independence, but are a part of something that could be compared to an interlinked cluster. You can learn more about this topic in the <a href=https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-regions-availability-zones.html>AWS User Guide</a></p></li><li><p><code>--bucket</code> defines the name of your Amazon S3 Bucket. You can find out more about about buckets <a href=https://docs.aws.amazon.com/AmazonS3/latest/dev/UsingBucket.html>here</a>.</p></li></ul><h5 id=creating-the-ami>Creating the AMI</h5><p>Now that we have uploaded our image, we can now proceed with making a snapshot:</p><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>ec2-create-snapshot <span style=color:#ed9d13>\
</span><span style=color:#ed9d13></span>   --aws-access-key <span style=color:#40ffff>$AWS_KEY</span> <span style=color:#ed9d13>\
</span><span style=color:#ed9d13></span>   --aws-secret-key <span style=color:#40ffff>$AWS_SEC</span> <span style=color:#ed9d13>\
</span><span style=color:#ed9d13></span>   --region us-east-1 <span style=color:#ed9d13>\
</span><span style=color:#ed9d13></span>   vol-XXXXXXXXXX
</code></pre></div><p><code>vol-XXXXXXXXXX</code> stands for the volume that is going to be used for the snapshot. You can learn more about Amazon EBS Volumes <a href=https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-volumes.html>here</a>.</p><p>Snapshots are particularly useful in our case, because we can make an AMI out of it:</p><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>ec2-register <span style=color:#ed9d13>\
</span><span style=color:#ed9d13></span>   --name <span style=color:#ed9d13>&#34;Haiku R1/beta2 AMI&#34;</span> <span style=color:#ed9d13>\
</span><span style=color:#ed9d13></span>   --aws-access-key <span style=color:#40ffff>$AWS_KEY</span> <span style=color:#ed9d13>\
</span><span style=color:#ed9d13></span>   --aws-secret-key <span style=color:#40ffff>$AWS_SEC</span> <span style=color:#ed9d13>\
</span><span style=color:#ed9d13></span>   --region us-east-1 <span style=color:#ed9d13>\
</span><span style=color:#ed9d13></span>   --architecture x86_64 <span style=color:#ed9d13>\
</span><span style=color:#ed9d13></span>   --root-device-name /dev/sda1 <span style=color:#ed9d13>\
</span><span style=color:#ed9d13></span>   --virtualization-type hvm <span style=color:#ed9d13>\
</span><span style=color:#ed9d13></span>   --snapshot snap-XXXXXXXXXX
</code></pre></div><h3 id=deploying-the-ami-on-the-aws-platform-a-namepart_deploymenta>Deploying the AMI on the AWS platform <a name=part_deployment></a></h3><p>Your new AMI should now appear in the <code>AMIs</code> section of the AWS Explorer. We can now launch an instance of the AMI by clicking on the <code>My AMIs</code> tab and selecting your newly made Haiku AMI.</p><p>If it hasn&rsquo;t appeared yet, then you may have to wait for a bit longer or click <code>Refresh</code>.</p></p></div></div></div><footer><div style=float:right><a href=https://www.netlify.com/><img src=https://www.netlify.com/img/global/badges/netlify-dark.svg alt="Deploys by Netlify"></a></div><p>&copy; 2001-2021 Haiku, Inc. &mdash; Haiku&reg; and the HAIKU logo&reg; are registered trademarks of <a href=https://www.haiku-inc.org/ target=_blank>Haiku, Inc.</a></p><p class=last><a href=../../index.xml>Main feed</a> |
<a href=../../blog/index.xml>Blog-O-Sphere feed</a> |
<a href=../../community/organization/policies/index.html>Community policies</a> |
<a href=https://twitter.com/haikuOS>Twitter</a> |
<a href=https://mastodon.xyz/@haiku>Mastodon</a> |
<a href=https://www.linkedin.com/company/haiku-inc->LinkedIn</a></p></footer></div><link href="https://fonts.googleapis.com/css?family=Noto+Sans:400,400i,700,700i" rel=stylesheet><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel=stylesheet><script src=../../js/navbar.js></script><!-- Fathom -->
<script>
(function(f, a, t, h, o, m){
	a[h]=a[h]||function(){
		(a[h].q=a[h].q||[]).push(arguments)
	};
	o=f.createElement('script'),
	m=f.getElementsByTagName('script')[0];
	o.async=1; o.src=t; o.id='fathom-script';
	m.parentNode.insertBefore(o,m)
})(document, window, '../../../metrics.haiku-os.org/tracker.js', 'fathom');
fathom('trackPageview');
</script>
<!-- / Fathom --></body>
<!-- Mirrored from www.haiku-os.org/guides/virtualizing/aws by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 05 Aug 2021 01:37:57 GMT -->
</html>