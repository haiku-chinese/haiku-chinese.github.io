<!doctype html><html lang=en>
<!-- Mirrored from www.haiku-os.org/guides/network_booting by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 05 Aug 2021 01:29:05 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=keywords content="booting,pxe,disk server"><meta name=copyright content="2001-2021 Haiku Inc."><meta property="og:site_name" content="Haiku Project"><meta property="og:title" content="Network Booting Haiku"><meta property="og:url" content="network_booting/index.html"><meta property="og:type" content="website"><meta property="og:image" content="../images/haiku_600x315.png"><title>Network Booting Haiku | Haiku Project</title><link rel=canonical href=network_booting/index.html><link rel="shortcut icon" href=../favicon.ico><link href=../css/bootstrap.min.css rel=stylesheet><link href=../css/bootstrap4_fixes.css rel=stylesheet><link href=../css/shijin4.css rel=stylesheet></head><body><div id=page><a href=../index.html><img src=../images/haiku_logo_white.svg alt=Home id=logo height=100 style=padding-left:3px></a><div id=top-links><a href=../get-haiku/r1beta3/index.html title="Get Haiku!" class=toggleopacity><img src=../images/download_32.png text="get haiku!" alt=Download></a>
<a href=../contact.html title="Contact the Haiku Project" class=toggleopacity><img src=../images/App_Mail_32.png text="contact the haiku project" alt=Contact></a>
<a href=https://www.haiku-inc.org/donate/ title="Make a donation to the Haiku Project" class=toggleopacity><img src=../images/App_Finance_32.png alt=Donate text="make a donation to the haiku project"></a>
<a href=https://dev.haiku-os.org/ title="Report bugs" class=toggleopacity><img src=../images/bug_tracker_32.png alt="Report Bugs" text="report bugs related to haiku"></a>
<a href=https://depot.haiku-os.org/ title="Download apps for Haiku from HaikuDepot" class=toggleopacity><img src=../images/installer_32.png alt=HaikuDepot text="download apps for haiku from haikudepot"></a></div><nav class="navbar navbar-expand-sm navbar-light bg-light"><button class="navbar-toggler collapsed" id=navbar-toggler type=button data-toggle=collapse data-target=#navbar-collapseme aria-controls=navbar-collapseme aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbar-collapseme><ul class="navbar-nav mr-auto"><li class=nav-item><a class=nav-link href=../about/index.html>About</a></li><li class=nav-item><a class=nav-link href=../community/index.html>Community</a></li><li class=nav-item><a class=nav-link href=../development/index.html>Development</a></li><li class=nav-item><a class=nav-link href=../documents/index.html>Documents</a></li></ul><form class=form-inline role=search action=https://duckduckgo.com/><input type=hidden name=sites value=https://www.haiku-os.org><div class=input-group><input type=text class=form-control placeholder=Search name=q>
<span class=input-group-append><button type=submit class="btn btn-outline-secondary">&#x1f50d;</button></span></div></form></div></nav><div class=row id=main-front><div class=col-sm-12><ol class=breadcrumb><li class=breadcrumb-item><a href=../index.html>Home</a></li><li class=breadcrumb-item><a href=index.html>Haiku Guides</a></li><li class=breadcrumb-item><a href=network_booting/index.html>Network Booting Haiku</a></li></ol></div><div class=col-md-12><div class=node><h1 class=title>Network Booting Haiku</h1><div class=meta><div class=terms><a href=../tags/booting.html rel=tag>booting</a>,
<a href=../tags/pxe rel=tag>pxe</a>,
<a href=https://www.haiku-os.org/tags/disk-server rel=tag>disk server</a></div></div><p><p>The root Haiku disk image (raw variant) can be booted remotely over the local network as of recent versions. This is especially useful when an architectures boot and kernel issues need to be troubleshot.</p><p>In the example below we will cover remote booting Haiku on various architectures. At the moment this is mostly geared toward developers.</p><p><strong>Requirements:</strong></p><ul><li><a href=https://www.haiku-os.org/guides/building/get-source-git>Haiku source code and build environment</a></li><li><a href=https://www.haiku-os.org/guides/building/pre-reqs>Linux build tools</a></li><li>Enough memory on the test system. (Size of haiku.image + 256MB should work)</li><li><em>haiku.image</em> file generated by <code>jam -q haiku-image</code></li><li>TFTP Server (for pushing out boot loader on PowerPC, ARM?)</li></ul><h3 id=remote-disk-server>Remote Disk Server</h3><p>The Haiku sources include a remote disk server which listens for UDP requests from the Haiku boot loader. When a network UDP request for the disk image is received from the boot loader, it is provided over the network to the test system.</p><h4 id=spawning-the-remote-disk-server>Spawning the remote disk server</h4><pre><code>jam -q run ':remote_disk_server' ./generated/haiku.image
</code></pre><div class="alert alert-info"><p><strong>Changes</strong><br>The remote disk server will need to be killed via CTL+C and re-spwaned each time the Haiku disk image changes.</p></div><p>After the remote disk server receives a request, it will begin to push the provided disk image out to the Haiku boot loader running on the test system…</p><pre><code>HELLO request
READ request: offset: 0, 512 bytes
READ request: offset: 1024, 512 bytes
READ request: offset: 2048, 512 bytes
READ request: offset: 3072, 512 bytes
READ request: offset: 4096, 512 bytes
READ request: offset: 5120, 512 bytes
READ request: offset: 6144, 512 bytes
READ request: offset: 7168, 512 bytes
READ request: offset: 0, 512 bytes
READ request: offset: 67108864, 232 bytes
READ request: offset: 67110912, 1024 bytes
READ request: offset: 67111936, 1024 bytes
READ request: offset: 67110912, 1024 bytes
READ request: offset: 67111936, 1024 bytes
.
.
</code></pre><h4 id=booting-from-remote-disk-server>Booting from remote disk server</h4><p>Booting methods vary from architecture to architecture. Generally the platform’s boot loader should perform the search for remote disk images prior to the Haiku menu.</p><div class="alert alert-info"><p><strong>YMMV</strong><br>The completeness of remote disk booting may vary based on architecture. The architectures below are known working at the time of this guides writing, your mileage may vary.</p></div><p><strong>x86, x86_64</strong></p><p>The x86 version of the Haiku boot loader can be booted via a PXE server.</p><p>Generate the x86 PXE bootloader via…</p><pre><code>TARGET_BOOT_PLATFORM=pxe_ia32 jam -q pxehaiku-loader haiku-netboot-archive
</code></pre><p>This will generate a boot image in tar.gz format and a pxe loader for it:</p><ul><li><code>haiku-netboot.tgz</code></li><li><code>objects/haiku/x86_gcc2/release/system/boot/pxehaiku-loader</code></li></ul><p>The image generated can be booted via a DHCP by placing both files generated above on a TFTP server and pointing to the loader via the DHCP ‘next-server/filename’ options.</p><p><strong>PowerPC</strong></p><p>The PowerPC version of Haiku can be started headless via TFTP or CD.</p><ol><li>Copy the boot_loader_openfirmware boot binary to your build system’s TFTP share.</li><li>At the <em>OpenFirmware</em> prompt, execute <code>boot enet:TFTP_SERVER_IP,boot_loader_openfirmware,DISK_SERVER_IP;</code>
* Replace TFTP_SERVER_IP with the IP of the tftp server.
* Optionally, the remote disk server can be specified by replacing DISK_SERVER_IP</li></ol></p></div></div></div><footer><div style=float:right><a href=https://www.netlify.com/><img src=https://www.netlify.com/img/global/badges/netlify-dark.svg alt="Deploys by Netlify"></a></div><p>&copy; 2001-2021 Haiku, Inc. &mdash; Haiku&reg; and the HAIKU logo&reg; are registered trademarks of <a href=https://www.haiku-inc.org/ target=_blank>Haiku, Inc.</a></p><p class=last><a href=https://www.haiku-os.org/index.xml>Main feed</a> |
<a href=https://www.haiku-os.org/blog/index.xml>Blog-O-Sphere feed</a> |
<a href=https://www.haiku-os.org/community/organization/policies/>Community policies</a> |
<a href=https://twitter.com/haikuOS>Twitter</a> |
<a href=https://mastodon.xyz/@haiku>Mastodon</a> |
<a href=https://www.linkedin.com/company/haiku-inc->LinkedIn</a></p></footer></div><link href="https://fonts.googleapis.com/css?family=Noto+Sans:400,400i,700,700i" rel=stylesheet><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel=stylesheet><script src=https://www.haiku-os.org/js/navbar.js></script><!-- Fathom -->
<script>
(function(f, a, t, h, o, m){
	a[h]=a[h]||function(){
		(a[h].q=a[h].q||[]).push(arguments)
	};
	o=f.createElement('script'),
	m=f.getElementsByTagName('script')[0];
	o.async=1; o.src=t; o.id='fathom-script';
	m.parentNode.insertBefore(o,m)
})(document, window, 'https://metrics.haiku-os.org/tracker.js', 'fathom');
fathom('trackPageview');
</script>
<!-- / Fathom --></body>
<!-- Mirrored from www.haiku-os.org/guides/network_booting by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 05 Aug 2021 01:29:05 GMT -->
</html>