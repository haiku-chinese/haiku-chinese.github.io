<!doctype html><html lang=en>
<!-- Mirrored from www.haiku-os.org/guides/building/configure/use-xattr by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 05 Aug 2021 01:40:57 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=keywords content><meta name=copyright content="2001-2021 Haiku Inc."><meta property="og:site_name" content="Haiku Project"><meta property="og:title" content="Native Extended Attributes and Cross-Compiling Haiku"><meta property="og:url" content="use-xattr/index.html"><meta property="og:type" content="website"><meta property="og:image" content="../../../images/haiku_600x315.png"><title>Native Extended Attributes and Cross-Compiling Haiku | Haiku Project</title><link rel=canonical href=use-xattr/index.html><link rel="shortcut icon" href=../../../favicon.ico><link href=../../../css/bootstrap.min.css rel=stylesheet><link href=../../../css/bootstrap4_fixes.css rel=stylesheet><link href=../../../css/shijin4.css rel=stylesheet></head><body><div id=page><a href=../../../index.html><img src=../../../images/haiku_logo_white.svg alt=Home id=logo height=100 style=padding-left:3px></a><div id=top-links><a href=../../../get-haiku/r1beta3/index.html title="Get Haiku!" class=toggleopacity><img src=../../../images/download_32.png text="get haiku!" alt=Download></a>
<a href=../../../contact.html title="Contact the Haiku Project" class=toggleopacity><img src=../../../images/App_Mail_32.png text="contact the haiku project" alt=Contact></a>
<a href=../../../community/donating_to_haiku title="Make a donation to the Haiku Project" class=toggleopacity><img src=../../../images/App_Finance_32.png alt=Donate text="make a donation to the haiku project"></a>
<a href=https://dev.haiku-os.org/ title="Report bugs" class=toggleopacity><img src=../../../images/bug_tracker_32.png alt="Report Bugs" text="report bugs related to haiku"></a>
<a href=https://depot.haiku-os.org/ title="Download apps for Haiku from HaikuDepot" class=toggleopacity><img src=../../../images/installer_32.png alt=HaikuDepot text="download apps for haiku from haikudepot"></a></div><nav class="navbar navbar-expand-sm navbar-light bg-light"><button class="navbar-toggler collapsed" id=navbar-toggler type=button data-toggle=collapse data-target=#navbar-collapseme aria-controls=navbar-collapseme aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbar-collapseme><ul class="navbar-nav mr-auto"><li class=nav-item><a class=nav-link href=../../../about/index.html>About</a></li><li class=nav-item><a class=nav-link href=../../../community/index.html>Community</a></li><li class=nav-item><a class=nav-link href=../../../development/index.html>Development</a></li><li class=nav-item><a class=nav-link href=../../../documents/index.html>Documents</a></li></ul><form class=form-inline role=search action=https://duckduckgo.com/><input type=hidden name=sites value=https://www.haiku-os.org><div class=input-group><input type=text class=form-control placeholder=Search name=q>
<span class=input-group-append><button type=submit class="btn btn-outline-secondary">&#x1f50d;</button></span></div></form></div></nav><div class=row id=main-front><div class=col-sm-12><ol class=breadcrumb><li class=breadcrumb-item><a href=../../../index.html>Home</a></li><li class=breadcrumb-item><a href=../../index.html>Haiku Guides</a></li><li class=breadcrumb-item><a href=../index.html>Building Haiku</a></li><li class=breadcrumb-item><a href=index.html>Configure Options</a></li><li class=breadcrumb-item><a href=use-xattr/index.html>Native Extended Attributes and Cross-Compiling Haiku</a></li></ol></div><div class=col-md-12><div class=node><h1 class=title>Native Extended Attributes and Cross-Compiling Haiku</h1><p><p>Due to the various ways that extended attributes are implemented in various file systems, some will present issues that need to be considered and others will simply be unusable. This page aims to clarify which file systems have extended attribute implementations compatible enough with Haiku&rsquo;s that they can be utilized during cross-builds.</p><p>Note that <code>configure</code> auto-detects the extended attribute capabilites of the filesystem you have asked it to configure a build on, and will automatically select &ldquo;full&rdquo;, &ldquo;ref&rdquo;, or no usage at all based on the filesystem&rsquo;s capabilites. If you would like to check what it has selected, you can view the <code>build/BuildConfig</code> file in your <code>generated</code> directory, and check the values of <code>HAIKU_HOST_USE_XATTR</code> and <code>HAIKU_HOST_USE_XATTR_REF</code>.</p><p>Please keep in mind that best results are generally obtained by using a filesystem natively, as compared to using it via a userland implementation like FUSE. All filesystems listed below are assumed to be utilized natively, unless otherwise noted.</p><h3>Compatible filesystems</h3><ul><li><h4>JFS</h4>(Note: JFS may exhibit instability and out-of-memory errors when --use-xattr is utilized.)</li><li><h4>NTFS (via NTFS-3G)</h4></li><li><h4>ReiserFS</h4></li><li><h4>UFS2</h4></li><li><h4>XFS</h4></li><li><h4>ZFS</h4></li></ul><h3>Troublesome filesystems</h3><ul><li><h4>Btrfs</h4><p>Building Haiku on Btrfs with extended attributes does not work. Utilizing it will give an error like the following, which was encountered when building Poorman.</p><p><em>mimeset: "/btrfs/haiku/haiku/generated.x86_gcc2/objects/haiku/x86/release/apps/poorman/PoorMan": No space left on device</em></p><p>Btrfs will need to be explored again in the future as it matures, since currently it is still a fairly young filesystem.</p></li><li><h4>Ext2, Ext3, Ext4</h4><p>Ext has a limit of one block, which is typically 4KB for reasonably large volumes. Since all attributes of a file need to be stored in this single block, it often is not large enough. Specifically, Expander is one application that is known to fail compiling when the block size is 4KB or smaller.</p><p>&lt;mmu_man> it fails here on ext3 on Expander IIRC, which has many supported types = too large xattr <b>& you need to explicitly enable it in fstab</b></p></li><li><h4>HFS+ (case sensitive)</h4><p>HFS+ fails just like Btrfs does, with a nearly identical error message.</p><p><em>mimeset: "generated/objects/haiku/x86/release/apps/poorman/PoorMan": Argument list too long</em></p></li></ul><h3>Some Notes</h3><ul><li><h4>How can you check for xattr support?</h4><p>There are command line tools for setting/getting attributes. You can just
try them on a file:<pre>
    touch tt
    setfattr -n "user.testAttr" -v "attribute value" tt
    getfattr -n "user.testAttr" tt
</pre>If they fail, you can check, whether your FS is mounted with xattrs enabled.
"mount" should list "user_xattr" as mount option for your FS.<p>If it doesn&rsquo;t you can try adding it in your /etc/fstab. After that it might still not
work, which probably means that the kernel has been compiled with that feature disabled.
<a href=http://www.freelists.org/post/haiku-development/Problem-generating-Haiku-VMWare-image,6>Problem generating Haiku VMWare image</a> mailing list thread.</p></p><p>On some Linux distributions (Debian/Ubuntu/..., for example), you may also need to install the attr package first:</p><pre>
sudo apt-get install attr
</pre></li><li><p>This <a href=http://www.freelists.org/post/haiku-development/Problem-generating-Haiku-VMWare-image,7>mailing list reply</a> seems to have better information.</br>You can check the xattr support on your partition with<pre>
    mount | grep devicename
</pre>where "devicename" is the device of the partition you want to check. For example, on a Gentoo box checking hda2 you may get:<pre>
    /dev/hda2 on /home type ext3 (rw,noatime,user_xattr)
</pre>and you can see xattr support is enabled here.<p>If you need to enable xattr on your partition you just need to remount it with:</p><pre>
    sudo mount -o remount -o user_xattr devicename
</pre><p>and if you want to enable xattr at the next boot edit /etc/fstab at the line of devicename. It would look something like this:</p><pre>
/dev/hda2       /home   ext3    noatime,user_xattr      0 3
</pre></p></li><li><h4>What does the build system do when native extended attributes aren't used?</h4><p>Under BeOS incompatible platforms that cannot make use of xattr, the build system is restricted to the generic attribute emulation (using separate files). This is likely slower and also requires you to <a href=../jam.html#emulated_attributes>clean up the $(HAIKU_OUTPUT_DIR)/generated/attributes directory</a> from time to time. If you're only doing full builds that doesn't matter at all, since you would delete the generated/{attributes,objects,tmp} directories before a build anyway.
<a href=http://www.freelists.org/post/haiku/buildmirrortorrent-host,1>build/mirror/torrent host</a> mailing list thread.</p></li><li><p>From <a href=https://dev.haiku-os.org/ticket/2772#comment:1>Ticket #2772</a>,
Attribute mixups are known to happen when building without even xattr-ref and when not building from the scratch (i.e. after deleting generated/objects and generated/attributes).</p></li></ul></p></div></div></div><footer><div style=float:right><a href=https://www.netlify.com/><img src=https://www.netlify.com/img/global/badges/netlify-dark.svg alt="Deploys by Netlify"></a></div><p>&copy; 2001-2021 Haiku, Inc. &mdash; Haiku&reg; and the HAIKU logo&reg; are registered trademarks of <a href=https://www.haiku-inc.org/ target=_blank>Haiku, Inc.</a></p><p class=last><a href=../../../index.xml>Main feed</a> |
<a href=../../../blog/index.xml>Blog-O-Sphere feed</a> |
<a href=../../../community/organization/policies/index.html>Community policies</a> |
<a href=https://twitter.com/haikuOS>Twitter</a> |
<a href=https://mastodon.xyz/@haiku>Mastodon</a> |
<a href=https://www.linkedin.com/company/haiku-inc->LinkedIn</a></p></footer></div><link href="https://fonts.googleapis.com/css?family=Noto+Sans:400,400i,700,700i" rel=stylesheet><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel=stylesheet><script src=../../../js/navbar.js></script><!-- Fathom -->
<script>
(function(f, a, t, h, o, m){
	a[h]=a[h]||function(){
		(a[h].q=a[h].q||[]).push(arguments)
	};
	o=f.createElement('script'),
	m=f.getElementsByTagName('script')[0];
	o.async=1; o.src=t; o.id='fathom-script';
	m.parentNode.insertBefore(o,m)
})(document, window, '../../../../metrics.haiku-os.org/tracker.js', 'fathom');
fathom('trackPageview');
</script>
<!-- / Fathom --></body>
<!-- Mirrored from www.haiku-os.org/guides/building/configure/use-xattr by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 05 Aug 2021 01:40:57 GMT -->
</html>