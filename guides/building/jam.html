<!doctype html><html lang=en>
<!-- Mirrored from www.haiku-os.org/guides/building/jam by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 05 Aug 2021 01:40:57 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=keywords content><meta name=copyright content="2001-2021 Haiku Inc."><meta property="og:site_name" content="Haiku Project"><meta property="og:title" content="Using Jam"><meta property="og:url" content="jam/index.html"><meta property="og:type" content="website"><meta property="og:image" content="../../images/haiku_600x315.png"><title>Using Jam | Haiku Project</title><link rel=canonical href=jam/index.html><link rel="shortcut icon" href=../../favicon.ico><link href=../../css/bootstrap.min.css rel=stylesheet><link href=../../css/bootstrap4_fixes.css rel=stylesheet><link href=../../css/shijin4.css rel=stylesheet></head><body><div id=page><a href=../../index.html><img src=../../images/haiku_logo_white.svg alt=Home id=logo height=100 style=padding-left:3px></a><div id=top-links><a href=../../get-haiku/r1beta3/index.html title="Get Haiku!" class=toggleopacity><img src=../../images/download_32.png text="get haiku!" alt=Download></a>
<a href=../../contact.html title="Contact the Haiku Project" class=toggleopacity><img src=../../images/App_Mail_32.png text="contact the haiku project" alt=Contact></a>
<a href=../../community/donating_to_haiku title="Make a donation to the Haiku Project" class=toggleopacity><img src=../../images/App_Finance_32.png alt=Donate text="make a donation to the haiku project"></a>
<a href=https://dev.haiku-os.org/ title="Report bugs" class=toggleopacity><img src=../../images/bug_tracker_32.png alt="Report Bugs" text="report bugs related to haiku"></a>
<a href=https://depot.haiku-os.org/ title="Download apps for Haiku from HaikuDepot" class=toggleopacity><img src=../../images/installer_32.png alt=HaikuDepot text="download apps for haiku from haikudepot"></a></div><nav class="navbar navbar-expand-sm navbar-light bg-light"><button class="navbar-toggler collapsed" id=navbar-toggler type=button data-toggle=collapse data-target=#navbar-collapseme aria-controls=navbar-collapseme aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbar-collapseme><ul class="navbar-nav mr-auto"><li class=nav-item><a class=nav-link href=../../about/index.html>About</a></li><li class=nav-item><a class=nav-link href=../../community/index.html>Community</a></li><li class=nav-item><a class=nav-link href=../../development/index.html>Development</a></li><li class=nav-item><a class=nav-link href=../../documents/index.html>Documents</a></li></ul><form class=form-inline role=search action=https://duckduckgo.com/><input type=hidden name=sites value=https://www.haiku-os.org><div class=input-group><input type=text class=form-control placeholder=Search name=q>
<span class=input-group-append><button type=submit class="btn btn-outline-secondary">&#x1f50d;</button></span></div></form></div></nav><div class=row id=main-front><div class=col-sm-12><ol class=breadcrumb><li class=breadcrumb-item><a href=../../index.html>Home</a></li><li class=breadcrumb-item><a href=../index.html>Haiku Guides</a></li><li class=breadcrumb-item><a href=index.html>Building Haiku</a></li><li class=breadcrumb-item><a href=jam/index.html>Using Jam</a></li></ol></div><div class=col-md-12><div class=node><h1 class=title>Using Jam</h1><p><p>Haiku uses a custom fork of <a href=http://www.perforce.com/jam/jam.html>Perforce's Jam</a>. This <a href=https://www.freelists.org/post/haiku/New-Build-System>mailing list thread</a> helps to explain the decision to fork jam.</p>As of August 2019, this is the current version. If a different version is reported, then you will need to build and install jam from source.<pre class=terminal>
jam -v
Jam 2.5-haiku-20111222. OS=LINUX. Copyright 1993-2002 Christopher Seiwald.
</pre><p><a name=jam_options></a></p><h3><a href=#jam_options>Command Line Options</a></h3>Only some of the options are being discussed here. See <span class=cli>jam -h</span> for a full listing of available options.<ul><li><h4>-q</h4>Typically jam will attempt to build all targets, even if an error is encountered. '-q' instructs jam to quit immediately upon encountering an error. This is preferred, as it helps to find the actual cause for build failure.</li><li><h4>-j#</h4>Where # represents the number of threads to use. This is useful when building on SMP or multi-core machines.<div class="alert alert-warning">Jam suffers from a <a href=https://dev.haiku-os.org/ticket/4091>bug</a> that might make your build fail when using this option.</div></li><li><h4>-a</h4>Build all targets, even if they are current. Normally, this is not necessary.
You may need to do this once in a while because some of the jam rules are not perfect and does not set the dependencies between files properly. The most frequent case is when we update our copy of Freetype : this will prevent anyone to build without the -a switch.
You can also use this switch if something does not seem to get updated after some change you made. This is the case when you modify a jamfile : Jam does not check for that and will not rebuild things that should be affected by the changes.</li><li><h4>-sx=y</h4>Set variable x=y, overriding environment. One example is :<pre class=terminal>
    jam -sHAIKU_IGNORE_USER_BUILD_CONFIG=1 -q @release-raw
</pre>This will ensure that the release-* targets are built to the exact specifications of Haiku's <a href=https://cgit.haiku-os.org/haiku/tree/build/jam/DefaultBuildProfiles>DefaultBuildProfiles</a>.</li><li><h4>-dX</h4>Enables debug output, where X can be one of the following:<ul><li>(a)actions</li><li>(c)causes</li><li>(d)dependencies</li><li>(m)make tree</li><li>(x)commands</li><li>(0-9) debug levels</li></ul></li><li><h4>-n</h4>Don't actually execute the updating actions. This seems to be useful for testing Jamfiles.</li></ul><p><a name=jam_targets></a></p><h3><a href=#jam_targets>Possible Targets</a></h3><h4>Official Release Targets</h4><p>The following targets are defined in <a href=https://cgit.haiku-os.org/haiku/tree/build/jam/DefaultBuildProfiles>build/jam/DefaultBuildProfiles</a></p><ul><li><h4>@release-raw</h4>Builds a pre-release image as a raw image. This can be written directly to disk or used with Qemu</li><li><h4>@release-vmware</h4>Builds a pre-release image for use with VMWare. This can also be used with VirtualBox.</li><li><h4>@release-cd</h4>A single track ISO CD. `mkisofs` is needed to build this.</li><li><h4>@release-anyboot</h4>A custom file that can be burned to CD or written directly to disk or used with Qemu.
It is comprised of an Master Boot Record (MBR), El Torito boot image, and a BFS raw image.
The MBR occupies the first 512 bytes of the El Torito image, which is usually empty.
The BFS image is simply concatenated at the end. Inside the MBR is a partition table entry, which maps to the BFS image.</li></ul><h4>Non-Release Targets</h4><p>In addition to looking at <a href=https://cgit.haiku-os.org/haiku/tree/build/jam/DefaultBuildProfiles>DefaultBuildProfiles</a>, there is also a way of finding possible targets by looking at the various <a href="http://grok.bikemonkey.org/source/search?q=NotFile&amp;defs=&amp;refs=&amp;path=%2Fbuild%2Fjam&amp;hist=&amp;project=haiku">"NotFile" statements</a>. A "NotFile" statement is usually used to create a build target with a more user-friendly name. Targets such as these should be viewed as a minimal base.</p><h3>Customizing the build, enabling debug, etc.</h3><p>Various aspects of the build system are customizable through the <a href=userbuildconfig.html>UserBuildConfig file</a>.</p><h3>Some Notes</h3><ul><a name=sudo_jam></a><li><h4><a href=#sudo_jam>sudo jam &lt;options></a></h4><p><div class="alert alert-warning">You should not be using the sudo command when running jam.</div>First of all, any and all files in $(HAIKU_OUTPUT_DIR)--typically /path/haiku/haiku/generated/ will only be accessible to root. To fix this, it is necessary to run <span class=cli>chown -R &lt;user>:&lt;group> &lt;path></span>. Secondly, user errors become much more damaging when `sudo jam` is used, as you could easily overwrite the wrong partition.</p><p>The preferred method is to apply permissions to your device first.</p><pre class=terminal>
sudo chmod o+r /dev/sda
sudo chmod o+rw /dev/sda2
jam -q @walter-sda2
</pre>This example uses the Build Profile 'walter-sda2', which is defined on the <a href=userbuildconfig.html#sample>UserBuildConfig & BuildProfiles</a> page.<p>For Linux distributions that make use of udev to maintain /dev, this will only work until you reboot. To allow your user permanent read access to the full disk and write access to the Haiku partition, you need to ask udev to do that for you after every boot. In order to do that, create a udev rule file for local changes (for openSUSE, the file could be named &lsquo;/etc/udev/rules.d/99-local.rules&rsquo;) and add this to it:</p><pre class=terminal>
KERNEL=="sda", MODE="0664"
KERNEL=="sda2", OWNER="your_username"
</pre><p>In order to activate the changes for the current session, please invoke<pre class=terminal>sudo udevadm trigger</pre></p></p></li><a name=emulated_attributes></a><li><h4><a href=#emulated_attributes>Cleaning up emulated attributes</a></h4>When building Haiku on a filesystem that is not BFS nor uses a <a href=configure/use-xattr.html>sufficient implementation of xattr</a>, the build system will emulate attributes. An <code>attributes/</code> folder will be created in your generated folder. It will be necessary to manually remove the emulated attributes folder, ideally before each build cycle. Otherwise some issues may occur.<p>Note: This assumes your HAIKU_OUTPUT_DIR is <code>generated/</code>!!</p><pre class=terminal>
cd /path/haiku/haiku/
jam clean
rm -Rf generated/attributes/
jam &lt;options&gt; &lt;target&gt;
</pre></li></ul><h3>Miscellaneous Links</h3><ul><li class=icon-document><a href=http://www.perforce.com/jam/jam.html>Jam's Perforce Homepage</a></li><li class=icon-document><a href=https://cgit.haiku-os.org/buildtools/plain/jam/Jam.html>The Jam Executable</a></li><li class=icon-document><a href=https://cgit.haiku-os.org/buildtools/plain/jam/Jambase.html>Jambase Reference</a></li><li class=icon-document><a href=https://cgit.haiku-os.org/buildtools/plain/jam/Jamfile.html>Using Jamfiles and Jambase</a></li></ul></p></div></div></div><footer><div style=float:right><a href=https://www.netlify.com/><img src=https://www.netlify.com/img/global/badges/netlify-dark.svg alt="Deploys by Netlify"></a></div><p>&copy; 2001-2021 Haiku, Inc. &mdash; Haiku&reg; and the HAIKU logo&reg; are registered trademarks of <a href=https://www.haiku-inc.org/ target=_blank>Haiku, Inc.</a></p><p class=last><a href=../../index.xml>Main feed</a> |
<a href=../../blog/index.xml>Blog-O-Sphere feed</a> |
<a href=../../community/organization/policies/index.html>Community policies</a> |
<a href=https://twitter.com/haikuOS>Twitter</a> |
<a href=https://mastodon.xyz/@haiku>Mastodon</a> |
<a href=https://www.linkedin.com/company/haiku-inc->LinkedIn</a></p></footer></div><link href="https://fonts.googleapis.com/css?family=Noto+Sans:400,400i,700,700i" rel=stylesheet><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel=stylesheet><script src=../../js/navbar.js></script><!-- Fathom -->
<script>
(function(f, a, t, h, o, m){
	a[h]=a[h]||function(){
		(a[h].q=a[h].q||[]).push(arguments)
	};
	o=f.createElement('script'),
	m=f.getElementsByTagName('script')[0];
	o.async=1; o.src=t; o.id='fathom-script';
	m.parentNode.insertBefore(o,m)
})(document, window, '../../../metrics.haiku-os.org/tracker.js', 'fathom');
fathom('trackPageview');
</script>
<!-- / Fathom --></body>
<!-- Mirrored from www.haiku-os.org/guides/building/jam by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 05 Aug 2021 01:40:57 GMT -->
</html>