<!doctype html><html lang=en>
<!-- Mirrored from www.haiku-os.org/guides/building/compiling-arm by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 05 Aug 2021 01:41:01 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=keywords content="compiling,arm"><meta name=copyright content="2001-2021 Haiku Inc."><meta property="og:site_name" content="Haiku Project"><meta property="og:title" content="Compiling Haiku for Arm"><meta property="og:url" content="compiling-arm/index.html"><meta property="og:type" content="website"><meta property="og:image" content="../../images/haiku_600x315.png"><title>Compiling Haiku for Arm | Haiku Project</title><link rel=canonical href=compiling-arm/index.html><link rel="shortcut icon" href=../../favicon.ico><link href=../../css/bootstrap.min.css rel=stylesheet><link href=../../css/bootstrap4_fixes.css rel=stylesheet><link href=../../css/shijin4.css rel=stylesheet></head><body><div id=page><a href=../../index.html><img src=../../images/haiku_logo_white.svg alt=Home id=logo height=100 style=padding-left:3px></a><div id=top-links><a href=../../get-haiku/r1beta3/index.html title="Get Haiku!" class=toggleopacity><img src=../../images/download_32.png text="get haiku!" alt=Download></a>
<a href=../../contact.html title="Contact the Haiku Project" class=toggleopacity><img src=../../images/App_Mail_32.png text="contact the haiku project" alt=Contact></a>
<a href=../../community/donating_to_haiku title="Make a donation to the Haiku Project" class=toggleopacity><img src=../../images/App_Finance_32.png alt=Donate text="make a donation to the haiku project"></a>
<a href=https://dev.haiku-os.org/ title="Report bugs" class=toggleopacity><img src=../../images/bug_tracker_32.png alt="Report Bugs" text="report bugs related to haiku"></a>
<a href=https://depot.haiku-os.org/ title="Download apps for Haiku from HaikuDepot" class=toggleopacity><img src=../../images/installer_32.png alt=HaikuDepot text="download apps for haiku from haikudepot"></a></div><nav class="navbar navbar-expand-sm navbar-light bg-light"><button class="navbar-toggler collapsed" id=navbar-toggler type=button data-toggle=collapse data-target=#navbar-collapseme aria-controls=navbar-collapseme aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbar-collapseme><ul class="navbar-nav mr-auto"><li class=nav-item><a class=nav-link href=../../about/index.html>About</a></li><li class=nav-item><a class=nav-link href=../../community/index.html>Community</a></li><li class=nav-item><a class=nav-link href=../../development/index.html>Development</a></li><li class=nav-item><a class=nav-link href=../../documents/index.html>Documents</a></li></ul><form class=form-inline role=search action=https://duckduckgo.com/><input type=hidden name=sites value=https://www.haiku-os.org><div class=input-group><input type=text class=form-control placeholder=Search name=q>
<span class=input-group-append><button type=submit class="btn btn-outline-secondary">&#x1f50d;</button></span></div></form></div></nav><div class=row id=main-front><div class=col-sm-12><ol class=breadcrumb><li class=breadcrumb-item><a href=../../index.html>Home</a></li><li class=breadcrumb-item><a href=../index.html>Haiku Guides</a></li><li class=breadcrumb-item><a href=index.html>Building Haiku</a></li><li class=breadcrumb-item><a href=compiling-arm/index.html>Compiling Haiku for Arm</a></li></ol></div><div class=col-md-12><div class=node><h1 class=title>Compiling Haiku for Arm</h1><div class=meta><div class=terms><a href=../../tags/compiling.html rel=tag>compiling</a>,
<a href=../../tags/arm.html rel=tag>arm</a></div></div><p><p>Haiku can be compiled for devices leveraging the ARMv7 or later processor architecture.</p><div class="alert alert-danger"><p><strong>Unstable</strong><br>The state of the ARM port is extremely early. Roll up your sleeves and help out!</p></div><h2 id=create-a-compiler-toolchain>Create a Compiler Toolchain</h2><p>Building the ARM compiler toolchain is quite easy using Haiku&rsquo;s <code>configure</code> tool.</p><blockquote><p>For a complete list of flags for the configure script, see <a href=configure.html>Haiku&rsquo;s Configure Options</a></p></blockquote><ol><li>Perform a git clone haiku and buildtools</li><li>Within the haiku source directory, create your workspace for ARM via <code>mkdir generated.arm; cd generated.arm</code></li><li>Leverage configure to build your ARM toolchain. <code>../configure -j2 --cross-tools-source ../../buildtools --build-cross-tools arm</code></li></ol><h2 id=building-an-mmc-sd-card-image>Building an MMC (SD Card) Image</h2><p>Once you have a complete ARM toolchain, you can build a Haiku MMC disk image via <code>jam -j2 -q @minimum-mmc</code>
This will generate an MMC image suitable for booting Haiku on real ARM hardware devices or in emulators like QEMU</p><div class="alert alert-warning"><p><strong>Post-processing</strong><br>The generated MMC image only contains Haiku software. Most physical ARM hardware devices will require extra binary bootloaders (including u-boot). Users can leverage the Rune tool to post-process generic Haiku ARM images for their target ARM device.</p></div><h2 id=emulating-arm-image>Emulating ARM Image</h2><p>The ARM images can also be emulated in QEMU ARM with an EFI bios like Tianocore.</p><blockquote><p>haiku-mmc.image contains our bootloader. haiku-minimum.mmc contains our filesystem. These need to be combined
in the future. You can remove the &ldquo;-hdb haiku-minimum.mmc&rdquo; to see our bootloader menu on arm (or theoretically tap space?)</p></blockquote><p>The location of the ARM Tianocore bios will vary based on platform. This example is for Fedora:</p><p><code>qemu-system-arm -M virt -m 1024 -bios /usr/share/edk2/arm/QEMU_EFI.fd -device virtio-gpu -hda haiku-mmc.image -hdb haiku-minimum.mmc</code></p><blockquote><p>Be sure to examine the uart console in QEMU for debug data from our bootloader / kernel.</p></blockquote><h2 id=running-on-real-hardware>Running on real hardware</h2><div class="alert alert-warning"><p><strong>Dragons</strong><br>While the 'structure' has been setup to get Haiku booting on real hardware, more work needs to be done to make it work reliably.</p></div><p>Generally, you&rsquo;ll need to &ldquo;post-process&rdquo; the Haiku MMC image for your target ARM device.
The <a href=https://github.com/haiku/rune>Rune</a> tool was designed for this purpose. It will download the necessary binary blobs to get Haiku running and inject them to the MMC image.</p><h3 id=provisioning-an-sd-card-directly>Provisioning an SD card directly</h3><p>Be sure to replace /dev/sde with your SD card block device.</p><p><code>rune -b rpi2 -i haiku-mmc.image /dev/sde</code></p><h3 id=creating-an-sd-card-image>Creating an SD card image</h3><p><code>rune -b rpi3 -i haiku-mmc.image /home/alex/haiku-rpi3.mmc</code>
<code>dd if=/home/alex/haiku-rpi3.mmc of=/dev/sde</code></p><h3 id=adding-support-for-additional-arm-hardware>Adding support for additional ARM hardware</h3><p>If upsteam u-boot supports your board, open a ticket to <a href=https://github.com/haiku/firmware>https://github.com/haiku/firmware</a> with the details and help us expand our inventory of supported devices!</p></p></div></div></div><footer><div style=float:right><a href=https://www.netlify.com/><img src=https://www.netlify.com/img/global/badges/netlify-dark.svg alt="Deploys by Netlify"></a></div><p>&copy; 2001-2021 Haiku, Inc. &mdash; Haiku&reg; and the HAIKU logo&reg; are registered trademarks of <a href=https://www.haiku-inc.org/ target=_blank>Haiku, Inc.</a></p><p class=last><a href=../../index.xml>Main feed</a> |
<a href=../../blog/index.xml>Blog-O-Sphere feed</a> |
<a href=../../community/organization/policies/index.html>Community policies</a> |
<a href=https://twitter.com/haikuOS>Twitter</a> |
<a href=https://mastodon.xyz/@haiku>Mastodon</a> |
<a href=https://www.linkedin.com/company/haiku-inc->LinkedIn</a></p></footer></div><link href="https://fonts.googleapis.com/css?family=Noto+Sans:400,400i,700,700i" rel=stylesheet><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel=stylesheet><script src=../../js/navbar.js></script><!-- Fathom -->
<script>
(function(f, a, t, h, o, m){
	a[h]=a[h]||function(){
		(a[h].q=a[h].q||[]).push(arguments)
	};
	o=f.createElement('script'),
	m=f.getElementsByTagName('script')[0];
	o.async=1; o.src=t; o.id='fathom-script';
	m.parentNode.insertBefore(o,m)
})(document, window, '../../../metrics.haiku-os.org/tracker.js', 'fathom');
fathom('trackPageview');
</script>
<!-- / Fathom --></body>
<!-- Mirrored from www.haiku-os.org/guides/building/compiling-arm by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 05 Aug 2021 01:41:01 GMT -->
</html>